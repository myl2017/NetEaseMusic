"use strict";$(function(){$.get("./database.json").then(function(reponse){var playList=reponse;playList.forEach(function(i){if(i.id<=6){var $li=$('\n                    <li>\n                        <a href="./playlist.html?id='+i.id+'">\n                            <div class="cover">\n                                <img src="'+i.cover+'" alt="推荐歌曲1"/>\n                                <span class="listener"><svg class="icon-headset"><use xlink:href="#icon-erjiicon"></use></svg>170万</span>\n                            </div>\n                            <p class="remd-summary">'+i.description+"</p>\n                        </a>\n                    </li>\n                ");$(".recommendList .recommendSongs").append($li)}else{return}});$(".recommendList .loading").remove()});$.get("./database.json").then(function(response){var songs=response;songs.forEach(function(i){if(i.id>=7&&i.id<=16){var $li=$('\n                    <li>\n                        <a href="./song.html?id='+i.id+'">\n                            <div class="songInfo">\n                                <h3>'+i.name+'</h3>\n                                <div class="songIntroduce"><i class="icon-sq"> </i><span>'+i.singer+" - "+i.name+'</span></div>\n                            </div>\n                            <div class="playButton"><span></span></div>\n                        </a>\n                    </li>\n                ');$(".newestList .newestSongs").append($li)}});$(".newestList .loading").remove()},function(error){console.log(error);alert("error!!!")});$.get("./database.json").then(function(response){var hotSongs=response;var index=0;hotSongs.forEach(function(i){var $li=void 0;var $li2=void 0;if(i.isHot===1){$li=$('\n                    <li>\n                        <a href="./song.html?id='+i.id+'">\n                            <div class="order song-hot">0'+(index+=1)+'</div>\n                            <div class="songInfo">\n                                <h3>'+i.name+'<span></span></h3>\n                                <div class="songIntroduce"><i class="icon-sq"> </i><span>'+i.singer+" - "+i.name+'</span></div>\n                            </div>\n                            <div class="playButton"><span></span></div>\n                        </a>\n                    </li>\n                ');$(".hotSongList .hotSongs").append($li)}else{$li2=$('\n                    <li>\n                        <a href="./song.html?id='+i.id+'">\n                            <div class="order">'+(i.id>=10?i.id+"":"0"+i.id)+'</div>\n                            <div class="songInfo">\n                                <h3>'+i.name+'<span></span></h3>\n                                <div class="songIntroduce"><i class="icon-sq"> </i><span>'+i.singer+" - "+i.name+'</span></div>\n                          </div>\n                            <div class="playButton"><span></span></div>\n                        </a>\n                    </li>\n                 ');$(".hotSongList .hotSongs").append($li2)}});$(".hotSongList .loading").remove();var $viewAll='               \n                        <div class="viewAll">\n                              <a class="hotViewLink" href="#">查看完整榜单 <span class="greaterThan">&gt;</span></a>\n                        </div>\n                        ';$(".hotsonglist .hotSongs").next($viewAll)},function(error){console.log(error);alert("error!!!")})});$(".tabs-nav").on("click","li",function(e){var $li=$(e.currentTarget);var index=$li.index();$li.addClass("active").siblings().removeClass("active");$(".tab-pannel").children().eq(index).addClass("active").siblings().removeClass("active")});var timer=null;$("input#search").on("input",function(e){if(timer){window.clearTimeout(timer)}timer=setTimeout(function(){timer=null;$(".records .hotList").removeClass("active");var $input=$(e.currentTarget);var value=$input.val().trim();if(value===""){return}var request=new XMLHttpRequest;request.open("GET","./database.json");request.setRequestHeader("Content-Type","application/json");request.onload=function(){var data=JSON.parse(request.responseText);$(".searchResult").empty();if(data===undefined){$(".searchResult").append('<p class="empty">没有找到结果</p>');return}for(var i=0;i<data.length;i++){if(data[i].name.includes(value)||data[i].singer.includes(value)||data[i].album.includes(value)){var $li='\n                    <li>\n                        <a  href="./song.html?id='+data[i].id+'">\n                            <div class="songInfo">\n                                <h3 class="highlight">'+data[i].name+'</h3>\n                                <div class="songIntroduce"><span>'+data[i].singer+" - "+data[i].name+'</span></div>\n                            </div>\n                            <div class="playButton"><span></span></div>\n                        </a>\n                    </li>\n                ';var $records='\n                        <li data-id="'+data[i].id+'">\n                            <svg class="icon-lishi"><use xlink:href="#icon-lishi"></use></svg>\n                            <div class="lishiInfo">\n                                <div class="lishiName"><a href="./song.html?id='+data[i].id+'">'+data[i].name+'</a></div>\n                            </div>\n                            <svg class="icon-clear" onclick="clearRecords('+data[i].id+')">\n                                 <use xlink:href="#icon-guanbixiao"></use>\n                             </svg>\n                        </li>\n                ';$(".searchResult").append($li);$(".records .history .history-Info").addClass("active").append($records)}}$(".searchResult").prepend('<h3 class="matchTitle">最佳匹配</h3>')};request.send()},400)});function clearRecords(id){var li="li[data-id='"+id+"']";$(li).remove()}$(".clearInput").on("click",function(e){$("input#search").val("")});$("input#search").on("focus",function(e){$(".holder").empty()});
